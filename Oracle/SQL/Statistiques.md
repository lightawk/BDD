# sql [-statistiques]

## AWR

### dba_hist_snapshot

> Premier et dernier snapshots par bases.

```
SELECT DBID,
     INSTANCE_NAME,
     HOST_NAME,
     MIN (SNAP_ID),
     MIN (BEGIN_INTERVAL_TIME)     BEGIN_TIME,
     MAX (SNAP_ID),
     MAX (END_INTERVAL_TIME)       END_TIME
FROM DBA_HIST_SNAPSHOT
     JOIN DBA_HIST_DATABASE_INSTANCE
         USING (DBID, INSTANCE_NUMBER, STARTUP_TIME)
GROUP BY DBID, INSTANCE_NAME, HOST_NAME
ORDER BY HOST_NAME, INSTANCE_NAME;
```

### dba_hist_sql_bind_metadata

> Nombre de SQL_BIND_METADATA par base.

```
SELECT HOST_NAME,
     INSTANCE_NAME,
     TO_CHAR (COUNT (*), '999G999G999G999')     "NB SQL_BIND_METADATA"
FROM DBA_HIST_SQL_BIND_METADATA
     JOIN (SELECT DISTINCT DBID, HOST_NAME, INSTANCE_NAME
             FROM DBA_HIST_DATABASE_INSTANCE)
         USING (DBID)
GROUP BY HOST_NAME, INSTANCE_NAME
ORDER BY HOST_NAME, INSTANCE_NAME;
```

### dba_hist_sql_plan

> Nombre de SQL_PLAN par base.

```
SELECT HOST_NAME,
     INSTANCE_NAME,
     TO_CHAR (COUNT (*), '999G999G999G999')     "NB SQL_PLAN"
FROM DBA_HIST_SQL_PLAN
     JOIN (SELECT DISTINCT DBID, HOST_NAME, INSTANCE_NAME
             FROM DBA_HIST_DATABASE_INSTANCE)
         USING (DBID)
GROUP BY HOST_NAME, INSTANCE_NAME
ORDER BY HOST_NAME, INSTANCE_NAME;
```